repositories:
  - name: minio
    url: https://helm.min.io/
  - name: dgraph
    url: https://charts.dgraph.io

releases:
  - name: gcsgw
    namespace: minio
    chart: minio/minio
    version: 6.3.1
    values:
      - minio_config.yaml
      ## generated by terraform scripts
      - minio_secrets.yaml
      - gcsgateway:
          projectId: {{ requiredEnv "PROJECT_ID" }}


  - name: my-release
    namespace: default
    chart: dgraph/dgraph
    version: 0.0.11
    values:
      - ./dgraph_config.yaml
      ## generated by terraform scripts
      - ./dgraph_secrets.yaml
      ## minio server configured
      - backups:
          ## Format <release_name>-minio.namespace.svc:9000/<bucket_name>
          destination: minio://gcsgw-minio.minio.svc:9000/{{ requiredEnv "BACKUP_BUCKET_NAME" }}
